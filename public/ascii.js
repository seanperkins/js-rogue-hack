document.addEventListener('DOMContentLoaded', function () {
  const chars = [
    'nul',
    'soh',
    'stx',
    'etx',
    'eot',
    'enq',
    'ack',
    'bel',
    'bs',
    'ht',
    'lf',
    'vt',
    'ff',
    'cr',
    'so',
    'si',
    'dle',
    'dc1',
    'dc2',
    'dc3',
    'dc4',
    'nak',
    'syn',
    'etb',
    'can',
    'em',
    'sub',
    'esc',
    'fs',
    'gs',
    'rs',
    'us',
    'cp437-032',
    'cp437-033',
    'cp437-034',
    'cp437-035',
    'cp437-036',
    'cp437-037',
    'cp437-038',
    'cp437-039',
    'cp437-040',
    'cp437-041',
    'cp437-042',
    'cp437-043',
    'cp437-044',
    'cp437-045',
    'cp437-046',
    'cp437-047',
    'cp437-048',
    'cp437-049',
    'cp437-050',
    'cp437-051',
    'cp437-052',
    'cp437-053',
    'cp437-054',
    'cp437-055',
    'cp437-056',
    'cp437-057',
    'cp437-058',
    'cp437-059',
    'cp437-060',
    'cp437-061',
    'cp437-062',
    'cp437-063',
    'cp437-064',
    'cp437-065',
    'cp437-066',
    'cp437-067',
    'cp437-068',
    'cp437-069',
    'cp437-070',
    'cp437-071',
    'cp437-072',
    'cp437-073',
    'cp437-074',
    'cp437-075',
    'cp437-076',
    'cp437-077',
    'cp437-078',
    'cp437-079',
    'cp437-080',
    'cp437-081',
    'cp437-082',
    'cp437-083',
    'cp437-084',
    'cp437-085',
    'cp437-086',
    'cp437-087',
    'cp437-088',
    'cp437-089',
    'cp437-090',
    'cp437-091',
    'cp437-092',
    'cp437-093',
    'cp437-094',
    'cp437-095',
    'cp437-096',
    'cp437-097',
    'cp437-098',
    'cp437-099',
    'cp437-100',
    'cp437-101',
    'cp437-102',
    'cp437-103',
    'cp437-104',
    'cp437-105',
    'cp437-106',
    'cp437-107',
    'cp437-108',
    'cp437-109',
    'cp437-110',
    'cp437-111',
    'cp437-112',
    'cp437-113',
    'cp437-114',
    'cp437-115',
    'cp437-116',
    'cp437-117',
    'cp437-118',
    'cp437-119',
    'cp437-120',
    'cp437-121',
    'cp437-122',
    'cp437-123',
    'cp437-124',
    'cp437-125',
    'cp437-126',
    'cp437-127',
    'cp437-128',
    'cp437-129',
    'cp437-130',
    'cp437-131',
    'cp437-132',
    'cp437-133',
    'cp437-134',
    'cp437-135',
    'cp437-136',
    'cp437-137',
    'cp437-138',
    'cp437-139',
    'cp437-140',
    'cp437-141',
    'cp437-142',
    'cp437-143',
    'cp437-144',
    'cp437-145',
    'cp437-146',
    'cp437-147',
    'cp437-148',
    'cp437-149',
    'cp437-150',
    'cp437-151',
    'cp437-152',
    'cp437-153',
    'cp437-154',
    'cp437-155',
    'cp437-156',
    'cp437-157',
    'cp437-158',
    'cp437-159',
    'cp437-160',
    'cp437-161',
    'cp437-162',
    'cp437-163',
    'cp437-164',
    'cp437-165',
    'cp437-166',
    'cp437-167',
    'cp437-168',
    'cp437-169',
    'cp437-170',
    'cp437-171',
    'cp437-172',
    'cp437-173',
    'cp437-174',
    'cp437-175',
    'cp437-176',
    'cp437-177',
    'cp437-178',
    'cp437-179',
    'cp437-180',
    'cp437-181',
    'cp437-182',
    'cp437-183',
    'cp437-184',
    'cp437-185',
    'cp437-186',
    'cp437-187',
    'cp437-188',
    'cp437-189',
    'cp437-190',
    'cp437-191',
    'cp437-192',
    'cp437-193',
    'cp437-194',
    'cp437-195',
    'cp437-196',
    'cp437-197',
    'cp437-198',
    'cp437-199',
    'cp437-200',
    'cp437-201',
    'cp437-202',
    'cp437-203',
    'cp437-204',
    'cp437-205',
    'cp437-206',
    'cp437-207',
    'cp437-208',
    'cp437-209',
    'cp437-210',
    'cp437-211',
    'cp437-212',
    'cp437-213',
    'cp437-214',
    'cp437-215',
    'cp437-216',
    'cp437-217',
    'cp437-218',
    'cp437-219',
    'cp437-220',
    'cp437-221',
    'cp437-222',
    'cp437-223',
    'cp437-224',
    'cp437-225',
    'cp437-226',
    'cp437-227',
    'cp437-228',
    'cp437-229',
    'cp437-230',
    'cp437-231',
    'cp437-232',
    'cp437-233',
    'cp437-234',
    'cp437-235',
    'cp437-236',
    'cp437-237',
    'cp437-238',
    'cp437-239',
    'cp437-240',
    'cp437-241',
    'cp437-242',
    'cp437-243',
    'cp437-244',
    'cp437-245',
    'cp437-246',
    'cp437-247',
    'cp437-248',
    'cp437-249',
    'cp437-250',
    'cp437-251',
    'cp437-252',
    'cp437-253',
    'cp437-254',
    'cp437-255',
  ]
  const characterList = document.getElementsByClassName('character-list')
  chars.forEach(function (char) {
    const wrapper = document.createElement('div')
    wrapper.classList.add('character-wrapper')
    const character = document.createElement('div')
    character.classList.add('character')
    character.id = char
    wrapper.appendChild(character)
    characterList[0].appendChild(wrapper)
  })

  const buttons = document.querySelectorAll('.character-wrapper')
  buttons.forEach((button, index) => {
    button.addEventListener('click', () => {
      const code = index
      const ascii = String.fromCharCode(code)
      copyTextToClipboard(ascii)
    })
  })
})

function fallbackCopyTextToClipboard(text) {
  var textArea = document.createElement('textarea')
  textArea.value = text

  // Avoid scrolling to bottom
  textArea.style.top = '0'
  textArea.style.left = '0'
  textArea.style.position = 'fixed'

  document.body.appendChild(textArea)
  textArea.focus()
  textArea.select()

  try {
    var successful = document.execCommand('copy')
    var msg = successful ? 'successful' : 'unsuccessful'
    console.log('Fallback: Copying text command was ' + msg)
  } catch (err) {
    console.error('Fallback: Oops, unable to copy', err)
  }

  document.body.removeChild(textArea)
}

function copyTextToClipboard(text) {
  if (!navigator.clipboard) {
    fallbackCopyTextToClipboard(text)
    return
  }
  navigator.clipboard.writeText(text).then(
    function () {
      console.log('Async: Copying to clipboard was successful!')
    },
    function (err) {
      console.error('Async: Could not copy text: ', err)
    },
  )
}
